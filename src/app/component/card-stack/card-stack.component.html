<div #tableMask class="game-char" [ngClass]="{'grab': (!isDragging), 'grabbing': (isDragging), 'transition': !isDragging, 'null_size': cardStack.cards.length<1}"
  [style.width.px]="2 * gridSize" (contextmenu)="onContextMenu($event)" [ngStyle]="{'z-index' : cardStack.zindex}">
  <div class="block-1 game-char_3d" [ngStyle]="{'transform': 'rotateZ(' + cardStack.rotate +'deg)'}" [ngClass]="{'grab': (!isDragging), 'grabbing': (isDragging), 'transition': !isDragging}">
    <ng-container *ngIf="cardStack && cardStack.imageFile">
      <div (@shuffle.start)="animationShuffleStarted($event)" (@shuffle.done)="animationShuffleDone($event)" [@shuffle]="animeState">
        <img class="background-image" [ngStyle]="{'transform': 'rotateZ(' + cardStack.topCard.rotate +'deg)'}" [src]="cardStack.imageFile.url | safe: 'resourceUrl'">
      </div>
    </ng-container>
    <div class="rotate-grab left-top" (mousedown)="onRotateMouseDown($event)"><i class="material-icons">autorenew</i></div>
    <div class="rotate-grab left-bottom" (mousedown)="onRotateMouseDown($event)"><i class="material-icons">autorenew</i></div>
    <div class="rotate-grab right-bottom" (mousedown)="onRotateMouseDown($event)"><i class="material-icons">autorenew</i></div>
    <div class="rotate-grab right-top" (mousedown)="onRotateMouseDown($event)"><i class="material-icons">autorenew</i></div>

    <!--
    <div class="card-side-top"></div>
    <div class="card-side-left"></div>
    <div class="card-side-bottom"></div>
    <div class="card-side-right"></div>
    -->

  </div>
  <div *ngIf="cardStack" class="title" [ngStyle]="{'transform': 'translateY(-50%) translateX(-50%) translateX(' + 2 * gridSize / 2 +'px)'}"
    style="position: absolute; top: 50%;background-color: #fcc; color: #CCC; background-color: rgba(30, 30, 30, 0.8);">
    <span style="white-space: nowrap;">{{cardStack.cards.length}}枚</span>
  </div>
  <div *ngIf="cardStack.hasOwner" class="title" [ngStyle]="{'transform': 'translateY(50%) translateX(-50%) translateX(' + 2 * gridSize / 2 +'px)'}"
    style="position: absolute; top: 50%;background-color: #fcc; color: #CCC; background-color: rgba(30, 30, 30, 0.8);">
    <span style="white-space: nowrap;">{{cardStack.ownerName}} が確認中</span>
  </div>
  <!--<div *ngIf="cardStack.isHand" class="lock-icon"><i class="material-icons">visibility</i></div>-->
  <!--  -->
</div>