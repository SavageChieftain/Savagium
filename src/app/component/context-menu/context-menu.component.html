<div class="draggable-panel is-max-limit" #root [style.left.px]="left" [style.top.px]="top" (mouseleave)="hideSubMenu()">
  <div *ngIf="0 < contextMenuService.title.length" class="title">{{contextMenuService.title}}</div>
  <ul>
    <ng-container *ngFor="let action of contextMenuService.actions">
      <ng-container *ngTemplateOutlet="action?.type === 'separator' ? separator : actionMenu; context: { action: action }"></ng-container>
    </ng-container>
  </ul>
</div>
<ng-template #actionMenu let-action="action">
  <li class="hasHighlight" (click)="doAction(action)" (mouseenter)="showSubMenu(action)">
    <div class="menu-title">{{action.name}}</div>
    <div *ngIf="action.subActions" class="sub-menu-arrow">
      <i class="material-icons" style="font-size: 1em; vertical-align: bottom;">arrow_forward_ios</i>
    </div>
    <context-sub-menu *ngIf="subMenu && parentMenu === action" [title]="action.name" [subActions]="subMenu"></context-sub-menu>
  </li>
</ng-template>
<ng-template #separator let-action="action">
  <li>
    <hr class="separator" />
  </li>
</ng-template>